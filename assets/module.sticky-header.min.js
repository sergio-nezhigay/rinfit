theme.StickyHeader=function(){function t(){}t.prototype=$.extend({},t.prototype,{init:function(t,e){t.attr("data-sticky-effect")||1;if(t.length){var i={_create:function(){function t(){n._fix(n.$sticky,n.$spacer),n._move(n.options[n.bp]),$window.trigger("verticalmenu.checkheight")}function e(){n._unfix(n.$sticky,n.$spacer),n._return(n.options[n.bp]),$window.trigger("verticalmenu.checkheight")}function i(){var t=theme.current.is_desktop;n.bp=t?"desktop":"mobile",n.$sticky=t?r:c,n.$spacer=t?a:h,n.$sticky.length&&(t?(h.removeClass("header__spacer--visible"),a.addClass("header__spacer--visible"),c.hasClass(n.sticky_class)&&(n._unfix(c,h),n._return(n.options.mobile))):(a.removeClass("header__spacer--visible"),h.addClass("header__spacer--visible"),r.hasClass(n.sticky_class)&&(n._unfix(r,a),n._return(n.options.desktop))))}function s(){if(n.$sticky.length){var i=n.options[n.bp].limit?n.options[n.bp].limit:0,s=n.$spacer[0].getBoundingClientRect();"bottom"===i&&(i=n.$sticky.hasClass(n.sticky_class)?n.$spacer.innerHeight():n.$sticky.innerHeight()),i*=-1,s.top<i?(n.$sticky.hasClass(n.sticky_class)||t(),ie||n._check_height(n.$sticky,n.options[n.bp])):n.$sticky.hasClass(n.sticky_class)&&e()}}var n=this,o=this.bindings,c=o.find(this.options.mobile&&this.options.mobile.sticky?this.options.mobile.sticky:""),r=o.find(this.options.desktop&&this.options.desktop.sticky?this.options.desktop.sticky:""),h=$("<div>").addClass("header__spacer header__spacer--m").insertBefore(c),a=$("<div>").addClass("header__spacer header__spacer--d").insertBefore(r);this.sticky_class="header__content--sticky",i(),s(),theme.current.is_desktop&&theme.VerticalMenu&&theme.VerticalMenu.checkHeightVerticalMenu&&setTimeout(function(){$window.trigger("verticalmenu.checkheight")},50),$window.on({"theme.resize.stickyHeader":function(){i(),s()},"scroll.stickyHeader":s})},_fix:function(t,e){var i=t.innerHeight();e.height(i),this.options[this.bp].fade&&t.css({opacity:0}).velocity({opacity:theme.animations.sticky_header.opacity},this.options[this.bp].duration()),t.addClass(this.sticky_class)},_unfix:function(t,e){e.removeAttr("style"),this.options[this.bp].fade&&t.velocity("stop",!0),t.removeAttr("style").removeClass(this.sticky_class)},_move:function(t){t.move&&$.each(t.move,function(){var t=$(this.elem),e=$(this.to),i=this.method||"append";this.$elem=t,this.$parent=t.parent(),e[i](t)})},_return:function(t){t.move&&$.each(t.move,function(){var t=this.method||"append";this.$parent[t](this.$elem),this.$elem=null,this.$parent=null})},_check_height:function(t,e){if(e.height){var i=this.$spacer[0].getBoundingClientRect(),s=i.bottom<=e.height?e.height:i.bottom;t.css({"min-height":s})}},getStickyHeight:function(){return this.options[this.bp]?this.options[this.bp].height||$(this.options[this.bp].sticky).innerHeight():0},destroy:function(){$(window).unbind("resize.stickyHeader scroll.stickyHeader"),$.Widget.prototype.destroy.call(this)}};return $.widget("ui.stickyHeader",i),t.stickyHeader(e),this.$sticky=t,{destroy:function(){t.stickyHeader("destroy")}}}}}),theme.StickyHeader=new t},$(function(){theme.StickyHeader()});