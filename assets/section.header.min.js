theme.Header=function(){function e(e){this.$container=$(e),this.namespace=".header",this.onLoad()}var t={menu:".js-menu",vertical_menu:".js-vertical-menu"};return e.prototype=$.extend({},Section.prototype,e.prototype,{_tape:function(){var e=this.$container.find(".js-header-tape"),t=function(){return 1e3*theme.animations.header_tape.duration};if(e.length){var i=e.find('[data-js-action="close"]'),a=$.cookie("header-tape"),n=e.attr("data-js-show-once"),s=+e.attr("data-js-delay"),r=+e.attr("data-js-cookies-life");"off"!==a&&(setTimeout(function(){e.removeClass("d-none"),e.velocity("slideDown",{duration:t(),complete:function(){e.removeAttr("style")}})},1e3*s),i.on("click",function(){if("true"===n){var i=new Date,a=864e5*r;i.setTime(i.getTime()+a),$.cookie("header-tape","off",{expires:i,path:"/"})}$(this).off(),e.velocity("slideUp",{duration:t(),complete:function(){e.remove()}})})),this._registerHansler(i)}},_menu:{init:function(e){var i=$(t.menu),a=$(t.vertical_menu);i.length&&(this.$menu=i.first(),theme.Menu=new theme.MenuBuilder(this.$menu,{namespace:e})),a.length&&(this.$vertical_menu=a.first(),theme.VerticalMenu=new theme.MenuBuilder(this.$vertical_menu,{namespace:e}))},destroy:function(){this.api&&(this.$menu.unbind("mouseenter"),this.api.destroy(),this.api=null),this.vertical_api&&(this.$vertical_menu.unbind("mouseenter"),this.vertical_api.destroy(),this.vertical_api=null),this.handler&&this.handler.destroy()}},_sticky:{init:function(){var e=$(".js-header-sticky"),t=e.attr("data-js-sticky"),i=e.attr("data-js-desktop-sticky-sidebar");if(e.length){var a={bp:1024};"desktop_and_mobile"!==t&&"desktop"!==t||($.extend(a,{desktop:{sticky:"[data-js-desktop-sticky]",limit:"bottom",fade:!0,duration:function(){return 1e3*theme.animations.sticky_header.duration}}}),"true"===i&&$.extend(a.desktop,{move:[{elem:'[data-js-sticky-replace-element="logo"]',to:'[data-js-sticky-replace-here="logo"]'},{elem:'[data-js-sticky-replace-element="cart"]',to:'[data-js-sticky-replace-here="cart"]'},{elem:'[data-js-sticky-replace-element="wishlist"]',to:'[data-js-sticky-replace-here="wishlist"]'},{elem:'[data-js-sticky-replace-element="compare"]',to:'[data-js-sticky-replace-here="compare"]'}]})),"desktop_and_mobile"!==t&&"mobile"!==t||$.extend(a,{mobile:{sticky:"[data-js-mobile-sticky]",limit:"bottom",fade:!1}}),theme.StickyHeader&&(this.api=theme.StickyHeader.init(e,a))}},destroy:function(){this.api&&(this.api.destroy(),this.api=null)}},_languages:{init:function(){function e(){var e=s.find("a").html(),t=$("<span>").html(e),i=$("<li>").addClass("active").attr("data-l",s.attr("data-l")).append(t);o.html(e),c.html("").append(i),r.find("li").each(function(){var e=$(this),t=$("<span>").html(e.find("a").html()),i=$("<li>").attr("data-l",e.attr("data-l")).append(t);c.append(i)})}function t(){var e=s.attr("data-l"),t=s.find("a").html();o.html(t),c.find("li").removeClass("active").filter('[data-l="'+e+'"]').addClass("active")}var i=this,a=$(".js-languages-list"),n=$(".weglot-container").eq(0);if(a.length&&n.length){var s=n.find(".wgcurrent"),r=n.find("ul"),o=a.find(".header__btn-language span"),c=a.find("ul");i.$header_list=c,e(),a.removeClass("d-none-important"),c.on("click","li:not(.active)",function(){var e=$(this);r.find('li[data-l="'+e.attr("data-l")+'"] a').trigger("click"),t(),e.parents("[data-js-dropdown]").trigger("hide")})}},destroy:function(){this.api&&(this.api.destroy(),this.api=null),this.$header_list&&this.$header_list.off()}},_currency:{init:function(e){function t(e){var t;return i.find("li").each(function(){var i=$(this);i.data("currency-code")==e?(i.addClass("active"),t=i.attr("data-button-name")||e):i.removeClass("active")}),t}var i=$(".js-currencies-list"),a=$(".js-currencies-form");if(i.length&&theme.ProductCurrency){var n,e=e+".currencies",s=i.find("[data-current-currency]");try{n=Currency.cookie.read()}catch(e){}if(null!=n&&n!==Currency.shopCurrency){var r=t(n);s.html(r)}i.on("click"+e,"li",function(e){var i=$(this);if(!i.hasClass("active")){var a=i.data("currency-code"),n=i.attr("data-button-name")||a;theme.ProductCurrency.setCurrency(a),t(a),s.html(n),theme.current.is_desktop?i.parents("[data-js-dropdown]").trigger("hide"):theme.Popups.closeByName("navigation")}return e.preventDefault(),!1}),this.api={destroy:function(){$body.unbind("click"+e)}}}else a.length&&a.find("select").on("change",function(){$(this).parents("form").submit()})},destroy:function(){this.api&&(this.api.destroy(),this.api=null)}},onLoad:function(){theme.is_loaded&&(theme.Position.update("menu"),theme.Position.update("currency"),theme.Tooltip&&theme.Tooltip.init()),theme.StoreLists.updateHeaderCount(),this._menu.init(this.namespace),this._sticky.init(),this._tape(),this._languages.init(),this._currency.init(this.namespace)},onUnload:function(){this.$container.off(this.namespace),this._offHanslers(),this._menu.destroy(),this._sticky.destroy(),this._languages.init(),this._currency.destroy(),theme.Tooltip&&theme.Tooltip.destroy()}}),e}(),$(function(){theme.sections.register("header",theme.Header)});